------------------------Installing iotPOS on the Raspberry Pi and Hardware setup.--------------------------------------

Note: If you don’t have a Raspberry pi and would like to test it on a PC we recommend KUBUNTU on a virtual machine.

For raspbian users we recommend to uninstall useless apps for a dedicated point of sale:

sudo apt-get update
sudo apt-get remove scratch wolfram-engine dillo netsurf-gtk sonic-pi minecraft-pi
sudo apt-get autoremove
sudo apt-get clean
sudo reboot
  
That will give you an extra .6 Gb space, great for smallers SDs.


---------------------------------------------------SOFTWARE-SETUP------------------------------------------------------

To compile and install:

Just in case you already didn't, make sure everything is up to date:

  sudo apt-get update

Now that everything is up to date, we can install the needed kde4 packages   (kdelibs4, kdebase4, kdepimlibs4) and all of his
  dependencies (qt4...):
  
  sudo apt-get install kdebase-runtime libqt4-dev


Once you have KDE, and QT4 installed, we can install mysql:

  sudo apt-get install mysql-client mysql-server
  
Now we need to install everything else that’s needed for the compile:

  sudo apt-get install build-essential g++ cmake gettext libqt4-sql-mysql kdelibs5-dev

 The next step is to download the source:
 
  cd ~
  git clone https://github.com/hiramvillarreal/iotpos
  
Move into the newly created directory, and create a 'build' Direcotry and move into it:

  cd iotpos 
  mkdir build
  cd build

Run CMake with your path to KDE4:

  cmake .. -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix`
  
  FOR kUBUNTU COMPILE ONLY:
  cmake -DCMAKE_INSTALL_PREFIX=kde4-config --prefix -DQT_QMAKE_EXECUTABLE=which qmake-qt4 -DQT_INCLUDE_DIR=/usr/include/qt4 -DCMAKE_BUILD_TYPE=Release ..
 
Run make to compile iotpos. This took about an hour on the Pi A, A+, B and B+, took 15 minutes on the new Pi2:
  
  make
  
After the compile is finished, you will need to install everything:  
  
  sudo make install
  
Now, copy the iotposrc file to your local .kde/share/config directory:
  
  cp iotpos/src/iotposrc /home/USER/.kde/share/config/  #Replace USER with your username: pi.
  
After installation, you need to create a database and user on mysql, to do this:

  cd iotpos/database_resources
  cat iotpos_mysql.sql | mysql -u root -p
  
  ------ To restore a database with preloaded products and examples:
  
  mysql -u root -p iotposdb < iotposdb.sql
  
To start using iotpos, type 

  iotpos
  
Icon apps are found at ~/iotpos/src  and  ~/iotpos/iotstock/src you can copy and paste them on the desktop.
  
If for any reason iotpos binary is not found, and if your kde4 install path is /opt/kde4 do:
  
  /opt/kde4/bin/iotpos
  
 * The default and only user and password is (without quotation marks):
 
   username: "admin"
   password: "linux"

  By default, squeeze has security disabled, this to let you configure squeeze database settings in case
  you have installed the database server at a different computer.

  
---------------------------------------------------HARDWARE-SETUP------------------------------------------------------

* SERIAL TTL THERMAL PRINTER INSTALL

The serial port on the Raspberry Pi’s GPIO header is normally configured for console cable use,
will output a Console from your Pi that,with a suitable Serial cable, you can use to control your Pi via the command-line.
But now we want to use this port for the thermal printer instead, so we’ll need to disable this default behavior.

  sudo raspi-config 
  Advanced options
  Serial /  Enable/Disable shell and kernel messages on the serial connection
   Would you like a login shell to be accessible over       │
          │ serial?  NO


* These libraries are required by the thermal printer library and example programs:

  sudo apt-get install python-serial python-imaging python-unidecode

* Test the printer with:

  cd ~/py-thermal-printer-master
  sudo python printer.py

CONECCTIONS FOR THE HARDWARE

-----SERIAL TTL THERMAL PRINTER----

WARNING!!!: Make sure a TTL printer is used, NEVER CONNECT A SERIAL RS232 TO PI'S GPIO!!! even using a TTL conection, never conect
the side printer Tx pin to Rx GPIO on the pi, the Tx wire is only used for rare cases where the printer returns data to the computer.
It’s left unconnected because the printer works at 5 Volts and the Raspberry Pi at 3.3 Volts… connecting directly to the RXD pin could
permanently damage the Raspberry Pi! (The other direction is safe as-is.). 

  Serial Data Cable rx TO    Physical pin 8 It's also commonly known as "Serial TX" ttyAMA0.
  Serial Data Cable tx  DO NOT CONNECT IT TO THE GPIO RX AS SOME ARE 5 V TTL WILL DAMAGE THE RASPBERRY PI!!!
  Serial GND from  serial printer to any gpio GND could use Physical pin 6,9, 14. 
  
-----Push buttom and LED.

Push bottom N.O. to Physical pin 16 switch to GND.
LED+ Physical pin 12 LED- TO any GND available.









